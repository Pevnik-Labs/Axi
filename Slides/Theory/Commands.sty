\ProvidesPackage{Commands}

\usepackage{xparse}

% Pipes - used when specifying grammars in BNF format.
\newcommand{\pipe}{\ |\ }

% Programming language.

% Quantities.
\newcommand{\Zero}{0}
\newcommand{\One}{1}
\newcommand{\ExplicitOmega}{\omega}

% Subusaging - order on quantities.
\NewDocumentCommand{\subusage}{m m}{#1 \leq #2}

% Operations on quantities.
\NewDocumentCommand{\addqty}{m m}{#1 + #2}
\NewDocumentCommand{\mulqty}{m m}{#1 \cdot #2}

% Types.
\NewDocumentCommand{\Fun}{o m m}{\IfValueTF{#1}{#1\ }{} #2 \to #3}
\RenewDocumentCommand{\Box}{o m}{\texttt{!}_{#1}\, #2}
%\newcommand{\Fun}[2]{#1 \to #2}
\newcommand{\Prod}[2]{#1 \otimes #2}
\newcommand{\Sum}[2]{#1 \oplus #2}
\newcommand{\Unit}{\textbf{1}}
\newcommand{\Empty}{\textbf{0}}
%\newcommand{\ForallT}[2]{\forall #1.\, #2}

% An optional type annotation.
\newcommand{\optionalannot}[1]{\IfValueTF{#1}{: #1}{}}
\newcommand{\optionalspace}[1]{\IfValueTF{#1}{\ #1}{}}

% Terms.
%\newcommand{\annot}[2]{(#1 : #2)}
\NewDocumentCommand{\fun}{o m o m}{\lambda_{#1}\, #2 \optionalannot{#3} .\, #4}
\NewDocumentCommand{\app}{m m}{#1\ #2}
\NewDocumentCommand{\boxintro}{o m}{\texttt{box}_{#1}\ #2}
\NewDocumentCommand{\boxelim}{m m m}{\texttt{letbox}\ #1 = #2\ \texttt{in}\ #3}
\NewDocumentCommand{\letin}{o m m m}{\texttt{let}_{#1}\ #2 = #3\ \texttt{in}\ #4}
\newcommand{\pair}[2]{(#1, #2)}
\newcommand{\outl}[2][]{\texttt{outl}_{#1}\ #2}
\newcommand{\outr}[2][]{\texttt{outr}_{#1}\ #2}
\newcommand{\inl}[2][]{\texttt{inl}_{#1}\ #2}
\newcommand{\inr}[2][]{\texttt{inr}_{#1}\ #2}
\newcommand{\case}[3]{\texttt{case}\ #1\ \texttt{of}\ (#2, #3)}
\newcommand{\unit}{\texttt{unit}}
\newcommand{\emptyelim}[2][]{\Empty\texttt{-elim}_{#1}\ #2}

% Contexts.

% Typing contexts.
\newcommand{\emptyctx}{\cdot}
\NewDocumentCommand{\extend}{m o m m o}{#1, \IfValueTF{#2}{#2\,}{} #3 : #4 \IfValueTF{#5}{:= #5}{}}
\NewDocumentCommand{\assume}{m m m}{#1, #2 : #3}
\NewDocumentCommand{\extendtype}{m m}{#1, #2}

% Context operations.
\NewDocumentCommand{\addctx}{m m}{#1 + #2}
\NewDocumentCommand{\scalectx}{m m}{#1\, #2}
\NewDocumentCommand{\subctx}{m m}{#1 \leq #2}

% Judgements.

% Declarative typing.
\NewDocumentCommand{\typing}{m m m}{#1 \vdash #2 : #3}

% Inference rules.
\newcommand{\rulename}[1]{\textsc{\footnotesize{#1}}}
\newcommand{\infrule}[3][]{\displaystyle \frac{#2}{#3} \rulename{#1}}

% Side conditions - this command semantically marks side conditions in inference rules, but otherwise does nothing.
\newcommand{\sidecond}[1]{#1}