\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage{babel}
\usepackage{xcolor}
\usepackage{Commands}

\usetheme{Darmstadt}

\title{T-Axi (algorithmic)}
\author
{
  Wojciech Ko≈Çowski\\
  \and
  Mateusz Pyzik\\
}
\date{}

\begin{document}

\frame{\titlepage}

\RenewDocumentCommand{\check}{m m m m}{#1 \vdash #2 \mathcolor{blue}{\Leftarrow} #3 \dashv #4}
\NewDocumentCommand{\infer}{m m m m}{#1 \vdash #2 \mathcolor{red}{\Rightarrow} #3 \dashv #4}

\section{Typing}

\begin{frame}{Decrement variable in context}

\begin{center}
  $\usevar{\emptyctx}{x} = \mathbf{undefined}$ \\
  $\usevar{(\extend{\Gamma}[r]{x}{A})}{x} = \extend{\Gamma}[(\subqty{r}{\One})]{x}{A}$ \\
  $\usevar{(\extend{\Gamma}[r]{y}{A})}{x} = \extend{\usevar{\Gamma}{x}}[r]{y}{A}$ \\
  $\usevar{(\extend{\Gamma}[r]{x}{A}[e])}{x} = \extend{\Gamma}[(\subqty{r}{\One})]{x}{A}[e]$ \\
  $\usevar{(\extend{\Gamma}[r]{y}{A}[e])}{x} = \extend{\usevar{\Gamma}{x}}[r]{y}{A}[e]$ \\
  $\usevar{(\assume{\Gamma}{h}{P})}{x} = \assume{\usevar{\Gamma}{x}}{h}{P}$
\end{center}

\end{frame}

\NewDocumentCommand{\findvar}{m m}{#1(#2)}

\begin{frame}{Using variables}

\begin{center}
  $\infrule{\findvar{\Gamma}{x} = A}{\infer{\Gamma}{x}{A}{\usevar{\Gamma}{x}}}$
\end{center}

\end{frame}

\begin{frame}{Functions}

\begin{center}
  $\infrule{\check{\extend{\Gamma}[r]{x}{A}}{e}{B}{\extend{\Gamma'}[r']{x}{A}} \quad \subusage{r'}{\Zero}}{\check{\Gamma}{\fun{x}{e}}{\Fun[r]{A}{B}}{\Gamma'}}$

  \vspace{2em}

  $\infrule{\infer{\Gamma}{f}{\Fun[r]{A}{B}}{\Gamma_1} \quad \divctx{\Gamma_1}{r} = (\Gamma_2, \Gamma_3) \quad \check{\Gamma_2}{a}{A}{\Gamma_4}}{\infer{\Gamma}{\app{f}{a}}{B}{\addctx{\Gamma_3}{\scalectx{r}{\Gamma_4}}}}$

  \vspace{2em}

  Useful shorthand (when not enough space):

  \vspace{1em}

  $\infrule{\check{\extend{\Gamma}[r]{x}{A}}{e}{B}{\extend{\Gamma'}[\Zero]{x}{A}}}{\check{\Gamma}{\fun{x}{e}}{\Fun[r]{A}{B}}{\Gamma'}}$
\end{center}

\end{frame}

\begin{frame}{Box}

\begin{center}
  $\infrule{\divctx{\Gamma}{r} = (\Gamma_1, \Gamma_2) \quad \check{\Gamma_1}{e}{A}{\Gamma_3}}{\check{\Gamma}{\boxintro{e}}{\Box[r]{A}}{\addctx{\Gamma_2}{\scalectx{r}{\Gamma_3}}}}$

  \vspace{2em}

  $\infrule{\infer{\Gamma}{e_1}{\Box[r]{A}}{\Gamma_1} \quad \infer{\extend{\Gamma_1}[r]{x}{A}}{e_2}{B}{\extend{\Gamma_2}[r']{x}{A}} \quad \subusage{r'}{\Zero}}{\infer{\Gamma}{\boxelim{x}{e_1}{e_2}}{B}{\Gamma_2}}$
\end{center}

\end{frame}

\begin{frame}{Empty}

\begin{center}
  $\infrule{\check{\Gamma}{e}{\Empty}{\Gamma'}}{\check{\Gamma}{\emptyelim{e}}{A}{\Gamma'}}$
\end{center}

\end{frame}

\begin{frame}{Unit}

\begin{center}
  $\infrule{}{\check{\Gamma}{\unit}{\Unit}{\Gamma}}$

  \vspace{2em}

  $\infrule{\infer{\Gamma}{e_1}{\Unit}{\Gamma_1} \quad \infer{\Gamma_1}{e_2}{A}{\Gamma_2}}{\infer{\Gamma}{\unitelim{e_1}{e_2}}{A}{\Gamma_2}}$
\end{center}

\end{frame}

\begin{frame}{Products}

\begin{center}
    $\infrule{\check{\Gamma}{a}{A}{\Gamma_1} \quad \check{\Gamma_1}{b}{B}{\Gamma_2}}{\check{\Gamma}{\pair{a}{b}}{\Prod{A}{B}}{\Gamma_2}}$

    \vspace{2em}

    $\infrule{\infer{\Gamma}{e_1}{\Prod{A}{B}}{\Gamma_1} \quad \infer{\extend{\extend{\Gamma_1}[\One]{x}{A}}[\One]{y}{B}}{e_2}{C}{\extend{\extend{\Gamma_2}[\Zero]{x}{A}}[\Zero]{y}{B}}}{\infer{\Gamma}{\letpair{x}{y}{e_1}{e_2}}{C}{\Gamma_2}}$
\end{center}

\end{frame}

\begin{frame}{Sums}

\begin{center}
  $\infrule{\check{\Gamma}{e}{A}{\Gamma'}}{\check{\Gamma}{\inl{e}}{\Sum{A}{B}}{\Gamma'}}$ \quad
  $\infrule{\check{\Gamma}{e}{B}{\Gamma'}}{\check{\Gamma}{\inr{e}}{\Sum{A}{B}}{\Gamma'}}$

  \vspace{2em}

  $\infrule{\infer{\Gamma}{e}{\Sum{A}{B}}{\Gamma_1} \quad \check{\Gamma_1}{f}{\Fun[\One]{A}{C}}{\Gamma_2} \quad \check{\Gamma_1}{g}{\Fun[\One]{B}{C}}{\Gamma_3}}{\check{\Gamma}{\case{e}{f}{g}}{C}{\Gamma_2 \sqcup \Gamma_3}}$

  \vspace{2em}

  $\infrule{\infer{\Gamma}{e}{\Sum{A}{B}}{\Gamma_1} \quad \infer{\Gamma_1}{f}{\Fun[\One]{A}{C}}{\Gamma_2} \quad \infer{\Gamma_1}{g}{\Fun[\One]{B}{C}}{\Gamma_3}}{\infer{\Gamma}{\case{e}{f}{g}}{C}{\Gamma_2 \sqcup \Gamma_3}}$
\end{center}

\end{frame}

\begin{frame}{Let}

\begin{center}
  $\infrule{\divctx{\Gamma}{r} = (\Gamma_1, \Gamma_2) \quad \infer{\Gamma_1}{e_1}{A}{\Gamma_3} \quad \infer{\extend{\addctx{\Gamma_2}{\scalectx{r}{\Gamma_3}}}[r]{x}{A}}{e_2}{B}{\extend{\Gamma_4}[\Zero]{x}{A}}}{\infer{\Gamma}{\letin[r]{x}{e_1}{e_2}}{B}{\Gamma_4}}$
\end{center}

\end{frame}


\end{document}